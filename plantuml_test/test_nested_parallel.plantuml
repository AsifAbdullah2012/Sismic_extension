@startuml
title Statechart to test nested parallel transitions
state "root" as root {
  [*] --> s1
  state "s1" as s1 {
    state "p2" as p2 {
      state "r4" as r4 {
        [*] --> i4
        r4 --> p2 : reset
        state "x" as x {
          x --> x : next
        }
        state "k4" as k4 {
          k4 --> x : next
        }
        state "j4" as j4 {
          j4 --> k4 : click
        }
        state "i4" as i4 {
          i4 --> j4 : next
        }
      }
      --
      state "r3" as r3 {
        [*] --> i3
        state "z" as z {
          z --> z : next
        }
        state "k3" as k3 {
          k3 --> z : next
        }
        state "j3" as j3 {
          j3 --> k3 : next
        }
        state "i3" as i3 {
          i3 --> j3 : next
        }
      }
    }
    --
    state "p1" as p1 {
      state "r2" as r2 {
        [*] --> i2
        r2 --> p1 : reset
        state "y" as y {
          y --> y : next
        }
        state "k2" as k2 {
          k2 --> y : next
        }
        state "j2" as j2 {
          j2 --> k2 : click
        }
        state "i2" as i2 {
          i2 --> j2 : next
        }
      }
      --
      state "r1" as r1 {
        [*] --> i1
        state "k1" as k1 {
          k1 --> k1 : next
        }
        state "j1" as j1 {
          j1 --> k1 : next
        }
        state "i1" as i1 {
          i1 --> j1 : next
        }
      }
    }
  }
}
@enduml